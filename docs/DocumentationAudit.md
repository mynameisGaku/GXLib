# GXLib ドキュメント監査レポート

**調査日:** 2026-02-17 (更新: 2026-02-21)
**参考記事:** [開発者が書くチュートリアルは読みにくい (Gigazine)](https://gigazine.net/news/20250926-developer-read/)

## 記事の要旨

アニー・ミューラー氏のブログ記事が指摘する「開発者が書くチュートリアルの問題」:

1. **専門用語の無説明使用** — 初心者が解説を読むために、さらに別の解説が必要になる
2. **前提知識の暗黙の仮定** — 「当然知っているはず」と思い込んで説明を省略する
3. **曖昧なコマンド・手順説明** — 実装段階で「何をすればいいか分からない」状態に陥る
4. **「知識の呪い」** — 専門家が他者も同じ知識を持っていると無意識に思い込む
5. **エコシステム成熟化の弊害** — 分野が確立されると基礎知識が省略されがちになる

---

## 調査対象

| ドキュメント | ファイル |
|---|---|
| README | `README.md` |
| チュートリアル 01-05 | `docs/tutorials/01_GettingStarted.md` 〜 `05_GUI.md` |
| DXLib 移行ガイド | `docs/migration/DxLibMigrationGuide.md` |
| サンプル README | `Samples/*/README.md` |

---

## 問題分析

### 問題 1: 専門用語の無説明使用

**深刻度: 高**

ドキュメント全体で、専門用語が説明なしに使われている箇所が多数存在する。

#### チュートリアル 01 (Getting Started)

| 箇所 | 問題 |
|---|---|
| `int WINAPI WinMain(HINSTANCE, HINSTANCE, LPSTR, int)` | Win32 API の型が説明なし。初心者はこの関数シグネチャだけで混乱する |
| `SetDrawScreen(GX_SCREEN_BACK)` | 「裏画面描画」とコメントしているが、なぜ裏画面に描画するのか(ダブルバッファリングの概念)が説明されていない |
| `cmdList.Begin(frameIndex)` / `cmdQueue.Execute()` | コマンドリスト・コマンドキューという D3D12 の基本概念が未説明 |
| `cmdList.Get()->ClearRenderTargetView(rtv, clearColor, 0, nullptr)` | 生の D3D12 API 呼び出しが何をしているか説明なし |
| `auto frameIndex = swapChain.GetCurrentBackBufferIndex()` | バックバッファインデックスとは何か未説明 |

#### チュートリアル 04 (3D Rendering)

| 箇所 | 問題 |
|---|---|
| PBR (物理ベースレンダリング) | 名前は書いてあるが、PBR が何か、従来レンダリングと何が違うかの説明がない |
| `metallic = 0.0f`, `roughness = 0.5f` | パラメータの意味（コメントあり）は書いてあるが、なぜこの値を選ぶかの指針がない |
| `TonemapMode::ACES` | ACES とは何か、他のモード (Reinhard, Uncharted2) との違いが不明 |
| CSM (カスケードシャドウマップ) | 名前だけ登場。何をするものか説明なし |
| `SetFov(GX::MathUtil::PI / 4.0f)` | FOV (視野角) の概念と 45 度を選ぶ理由が未説明 |
| SSAO, SSR, DoF, TAA 等 | 略語の展開すらない（リストの日本語名はあるが意味の説明なし） |

#### README.md

| 箇所 | 問題 |
|---|---|
| 特徴一覧 | PBR, CSM, SSAO, SSR, TAA, HDR, FXAA, VFS, BVH, SAH 等の略語が大量に列挙され、知らない人には暗号に見える |

---

### 問題 2: 前提知識の暗黙の仮定

**深刻度: 高**

#### 読者レベルの想定が不明確

チュートリアルの対象読者が明記されていない。以下の知識が暗黙的に要求されている:

- **C++ の基礎知識** — ラムダ式、`auto`、`unique_ptr` が説明なく使われている
- **Win32 API** — `WinMain`, `HINSTANCE`, `PostQuitMessage` が前提
- **CMake** — ビルド手順で cmake コマンドを示すが、CMake 自体の説明なし
- **DirectX / GPU** — コマンドリスト、スワップチェーン、レンダーターゲットが前提知識
- **Web 技術 (CSS/XML)** — GUI チュートリアルで Flexbox, セレクタ構文が前提知識

#### 具体例

```cpp
// チュートリアル 05 より
loader.RegisterEvent("btnStart", [](GX::Widget&) {
    StartGame();
});
```
ラムダ式を知らない読者にとって `[](GX::Widget&) { ... }` は意味不明。

```cpp
// チュートリアル 03 より
int mouse = GetMouseInput();
if (mouse & MOUSE_INPUT_LEFT) { /* 左クリック中 */ }
```
ビットフラグ演算（`&` 演算子のビット単位 AND 的用法）が説明なし。

---

### 問題 3: 関数パラメータの説明不足

**深刻度: 中**

コード例で関数の引数の意味が分かりにくい箇所が多い。

#### チュートリアル 02 (2D Drawing)

```cpp
DrawRotaGraph(640, 480, 2.0, 0.5, texHandle, TRUE);
```
- `640, 480` = 座標？
- `2.0` = 拡大率？
- `0.5` = 回転角度（ラジアン）？度？
- `TRUE` = 何を有効にしている？

コメントは「拡大・回転描画」のみ。個々の引数の意味は読者の推測に委ねられている。

```cpp
GX::MeshData sphere = GX::MeshData::CreateSphere(0.5f, 32, 16);
```
- `0.5f` = 半径（コメントなし）
- `32` = ?
- `16` = ?

分割数であることは経験者しか分からない。

---

### 問題 4: 「なぜ」の欠如

**深刻度: 高**

コード例は「何をするか」は示しているが、「なぜそうするか」「なぜその値を選ぶか」の説明が全般的に欠落している。

| 箇所 | 不足している説明 |
|---|---|
| `SetDrawScreen(GX_SCREEN_BACK)` | なぜ裏画面に描画する必要があるか |
| `ScreenFlip()` | フリップが必要な理由（ティアリング防止等） |
| `SetCameraNearFar(0.1f, 1000.0f)` | なぜ 0.1 と 1000 なのか。値を変えると何が起きるか |
| `light.intensity = 3.0f` | なぜ 3.0 か。1.0 や 10.0 だとどうなるか |
| `postFX.SetBloomThreshold(1.0f)` | しきい値 1.0 の意味。HDR 値との関係 |
| `camera.SetAspectRatio(1280.0f / 960.0f)` | アスペクト比とは何か、なぜ計算で求めるか |

---

### 問題 5: エラーケース・トラブルシューティングの欠如

**深刻度: 中**

#### 記載されていない事項

- ビルドが失敗した場合の対処法
- `GX_Init()` が `-1` を返す原因と対処
- シェーダーファイルが見つからない場合のエラー（VS_DEBUGGER_WORKING_DIRECTORY 問題）
- GPU が DirectX 12 に非対応の場合の挙動
- テクスチャファイルが存在しない場合
- サウンドファイルが WAV 以外の場合

開発中にメモリ（MEMORY.md）に記録された「Common Issues」には多数の落とし穴が挙げられているが、チュートリアルや公開ドキュメントにはこれらが一切反映されていない。

---

### 問題 6: 移行ガイドの DXLib 前提

**深刻度: 低〜中**

DXLib 移行ガイドは DXLib ユーザーを対象としているため、DXLib の前提知識は許容範囲。ただし以下の点は問題:

- `DIK_* コード互換` — DIK (DirectInput Key) の説明なし
- 非互換項目は列挙されているが、代替手段や回避方法の説明が不足
- 実際の移行前後を比較する「完全なコード例」がない

---

### 問題 7: サンプル README の情報不足

**深刻度: 低**

サンプルの README は最小限（操作方法 + ビルドコマンドのみ）で、以下が不足:

- サンプルのスクリーンショット
- コードの主要部分の解説
- 学べるポイントの説明
- 必要なアセットファイルの説明

---

## 問題の該当度まとめ

| 記事の指摘 | GXLib での該当状況 | 深刻度 |
|---|---|---|
| 専門用語の無説明使用 | **該当する** — D3D12 用語、ポストエフェクト略語、PBR 用語等が多数 | 高 |
| 前提知識の暗黙の仮定 | **該当する** — C++, Win32, CMake, DirectX, CSS が暗黙の前提 | 高 |
| 曖昧なコマンド説明 | **部分的に該当** — 関数パラメータの意味が推測頼り | 中 |
| 「知識の呪い」 | **該当する** — 「なぜ」の説明が全般的に欠落 | 高 |
| エコシステム成熟化の弊害 | **該当する** — 開発メモには詳細な知見があるが公開ドキュメントに未反映 | 中 |

---

## 改善提案

### 1. 対象読者の明記

各チュートリアルの冒頭に前提知識を明記する。

```markdown
## 前提知識
- C++ の基礎（変数、関数、クラス、ポインタ）
- Visual Studio の基本操作
- コマンドラインの基本操作
```

### 2. 用語集 (Glossary) の作成

略語・専門用語をまとめた用語集ページを作成し、チュートリアル内からリンクする。

```markdown
| 用語 | 正式名称 | 説明 |
|---|---|---|
| PBR | Physically Based Rendering | 物理法則に基づく現実的なライティング手法 |
| SSAO | Screen Space Ambient Occlusion | 画面空間で環境光の遮蔽を近似する手法 |
| CSM | Cascaded Shadow Maps | 距離に応じてシャドウマップの精度を段階分けする手法 |
```

### 3. 関数パラメータの説明追加

コード例の引数にインラインコメントか、直後に引数表を追加する。

```cpp
DrawRotaGraph(
    640, 480,       // 描画中心座標 (px)
    2.0,            // 拡大率 (1.0 = 等倍)
    0.5,            // 回転角度 (ラジアン, 約28.6度)
    texHandle,      // テクスチャハンドル
    TRUE);          // 透過描画 (TRUE = アルファ値を使用)
```

### 4. 「なぜ」の説明を追加

各コード例の前後に、設計意図や値の選定理由を簡潔に記述する。

```markdown
> **なぜ裏画面に描画するのか？**
> 直接画面に描画すると、描画途中の不完全な画像が見えてしまいます（ティアリング）。
> 裏画面に描き終えてから一括表示（ScreenFlip）することで、滑らかな表示になります。
```

### 5. トラブルシューティングセクションの追加

各チュートリアルの末尾に「よくある問題」を追加する。

```markdown
## よくある問題

### Q: ビルドは成功するが、実行時にシェーダーが見つからないエラーが出る
Visual Studio からデバッグ実行する場合、作業ディレクトリが exe の場所と
異なることがあります。プロジェクトプロパティ → デバッグ → 作業ディレクトリを
`$(TargetDir)` に設定してください。

### Q: GX_Init() が -1 を返す
DirectX 12 に対応した GPU とドライバが必要です。...
```

### 6. サンプルコードに段階的な解説を追加

「完成コード → コピペ」ではなく、段階的に構築する形に変更する。

```markdown
### ステップ 1: ウィンドウを開く
まずは空のウィンドウを表示するだけのコードです。
[コード + 説明]

### ステップ 2: 背景色を変更する
ClearDrawScreen で画面を青く塗りつぶしてみましょう。
[コード + 説明]

### ステップ 3: テキストを表示する
[コード + 説明]
```

---

## 結論

GXLib のドキュメントは、記事が指摘する「開発者が書く読みにくいチュートリアル」の特徴に**複数該当**している。特に以下の 3 点が顕著:

1. **専門用語の説明不足** — D3D12/グラフィックスの専門用語が前提知識として扱われている
2. **「なぜ」の欠如** — コードが「何をするか」は書いてあるが「なぜそうするか」が書かれていない
3. **開発メモと公開ドキュメントの乖離** — MEMORY.md に蓄積された実践的知見が公開ドキュメントに反映されていない

ドキュメントの構造自体（チュートリアル 5 本 + 移行ガイド + サンプル）は良好であり、改善の余地は大きい。上記の提案を順次適用することで、初心者にもアクセスしやすいドキュメントに改善できる。

---

## 2026-02-21 更新: Phase 11〜22 反映状況

### 追加済み項目

以下の Phase 11〜22 の機能がドキュメントに反映された:

| Phase | 機能 | 反映先 |
|---|---|---|
| 11 | DXR レイトレーシング反射 (RTReflections) | index.html (ページ+サイドバー), README, Glossary, チュートリアル04, 移行ガイド |
| 12 | DXR RTGI (グローバルイルミネーション) | index.html (ページ+サイドバー), README, Glossary, チュートリアル04 |
| 13 | アセットパイプライン (gxformat/gxconv/gxloader/gxpak) | index.html (4ページ+サイドバー), README, Glossary, チュートリアル04, 移行ガイド |
| 14 | ShaderRegistry + シェーダーモデル PSO | index.html (2ページ+サイドバー), README, Glossary, チュートリアル04 |
| 15 | アニメーションブレンド (BlendStack/BlendTree/ASM) | index.html (4ページ+サイドバー), README, Glossary, チュートリアル04 |
| 16-17 | GXModelViewer | README (プロジェクト構成), 移行ガイド |
| 18 | マテリアルオーバーライド + Toon 強化 + GXPAK VFS | index.html (PakFileProvider ページ), README |
| 19-21 | スムース法線 Toon アウトライン + UTS2 | index.html (ShaderRegistry 内), README, Glossary, チュートリアル04 |
| 22 | ImGui Docking 移行 | README, Glossary |

### 残課題

- GXModelViewer の操作方法チュートリアルは未作成（新規チュートリアル 06 が望ましい）
- index.html の JS detail データに Phase 14-22 の詳細説明/サンプルコードが未追加
- サンプル README の Phase 11+ 新機能への言及が不足
